# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ PostgreSQL –≤ Docker

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 12 —è–Ω–≤–∞—Ä—è 2026
- **–°—Ä–µ–¥–∞:** Docker (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä erp-postgres)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** erp_production

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PostgreSQL ‚úÖ
- –°–æ–∑–¥–∞–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `postgresql-optimized.conf`
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–º—è—Ç–∏ –ø–æ–¥ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –í–∫–ª—é—á–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (>1 —Å–µ–∫—É–Ω–¥—ã)
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è SSD –¥–∏—Å–∫–æ–≤

### 2. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è ‚úÖ
–°–æ–∑–¥–∞–Ω—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `price_modifiers`:
- `idx_price_modifiers_active_priority` - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
- `idx_price_modifiers_property_lookup` - –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ —Å–≤–æ–π—Å—Ç–≤–∞–º
- `idx_price_modifiers_code` - –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∫–æ–¥—É
- `idx_price_modifiers_dates` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏

### 3. –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ ‚úÖ
–°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è:
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–µ—Å—É—Ä—Å–æ–≤:** CPU, –ø–∞–º—è—Ç—å, —Å–µ—Ç–µ–≤–æ–π I/O
- **–ê–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** cache hit ratio, —Ä–∞–∑–º–µ—Ä—ã —Ç–∞–±–ª–∏—Ü
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á–µ—Ç–æ–≤:** —Å –ª–æ–≥–∞–º–∏ –∏ markdown –æ—Ç—á–µ—Ç–∞–º–∏

### 4. –°–∏—Å—Ç–µ–º–∞ backup'–æ–≤ ‚úÖ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ backup'–æ–≤:
- **Daily backups** - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
- **Weekly backups** - –ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º  
- **Monthly backups** - 1-–≥–æ —á–∏—Å–ª–∞ –º–µ—Å—è—Ü–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** —Å—Ç–∞—Ä—ã—Ö backup'–æ–≤
- **–°–∂–∞—Ç–∏–µ** backup'–æ–≤ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ—Å—Ç):
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞:** 1.7 ms
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è:** 106 ms
- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:** 20 RPS
- **–û—à–∏–±–æ–∫:** 0

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (—Ç–µ–∫—É—â–∏–π —Ç–µ—Å—Ç):
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞:** 0.5 ms (—É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 70%)
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è:** 23 ms (—É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 78%)
- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:** 20 RPS (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è)
- **–û—à–∏–±–æ–∫:** 0
- **95-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å:** 1 ms (–æ—Ç–ª–∏—á–Ω–æ)
- **99-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å:** 2 ms (–æ—Ç–ª–∏—á–Ω–æ)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

### –†–µ—Å—É—Ä—Å—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
```
CPU: 0.03%
–ü–∞–º—è—Ç—å: 31.28MiB / 3.827GiB
Network I/O: 1.94MB / 1.35MB
Disk I/O: 0B / 336MB
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
- **–†–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã price_modifiers:** 144 kB
- **–†–∞–∑–º–µ—Ä –∏–Ω–¥–µ–∫—Å–æ–≤:** 136 kB
- **Cache hit ratio:** 75.93%
- **–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:** 1

### Backup —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **Daily backups:** 1 (4.0K)
- **Weekly backups:** 1 (4.0K)
- **–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä backup'–æ–≤:** 8.0K

## –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- `config/postgres/postgresql-optimized.conf` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PostgreSQL

### –°–∫—Ä–∏–ø—Ç—ã:
- `scripts/create-optimized-indexes.sh` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
- `scripts/monitor-postgres.sh` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `scripts/postgres-backup.sh` - —Å–∏—Å—Ç–µ–º–∞ backup'–æ–≤

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
- `logs/postgres-monitoring/` - –ª–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `reports/postgres-monitoring/` - –æ—Ç—á–µ—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `backups/postgres/` - backup'—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `logs/postgres-backup/` - –ª–æ–≥–∏ backup'–æ–≤

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
./scripts/monitor-postgres.sh

# Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
./scripts/postgres-backup.sh
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü:
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ ERP —Å–∏—Å—Ç–µ–º—É:
1. –û–±–Ω–æ–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∏–Ω–¥–µ–∫—Å–æ–≤ —Å –Ω—É–∂–Ω—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ —Å–ø–∏—Å–æ–∫ ANALYZE
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
–î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏:
1. –£–≤–µ–ª–∏—á–∏—Ç—å `shared_buffers` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ worker –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å connection pooling

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ –Ω–∞ 70-78%**
‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –æ—à–∏–±–æ–∫**
‚úÖ **–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ backup'–æ–≤**
‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Docker**
‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è**

### ROI:
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ‚Üë 70-78%
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** 100% uptime
- **–°–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ–º–æ—Å—Ç—å:** –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –ì–æ—Ç–æ–≤–∞ –∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –Ω–∞–≥—Ä—É–∑–∫–∏

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

---
**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª:** PostgreSQL Optimization Team  
**–î–∞—Ç–∞:** 12 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** Final Optimization Report v1.0