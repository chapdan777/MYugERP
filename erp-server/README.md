# Production ERP Server

–°–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ–º, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ NestJS —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ Clean Architecture –∏ Domain-Driven Design (DDD).

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏** - –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ –∑–∞–∫–∞–∑–∞–º–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å** - –∑–∞–∫–∞–∑-–Ω–∞—Ä—è–¥—ã, –∫–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∏, –∫–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞–º–∏** - –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, —Ä–∞—Å—á–µ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã
- **–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è** - —É—á–µ—Ç –ø–ª–∞—Ç–µ–∂–µ–π, –±–∞–ª–∞–Ω—Å –∫–ª–∏–µ–Ω—Ç–æ–≤, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø–ª–∞—Ç
- **–ê—É–¥–∏—Ç** - –ø–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - WebSocket –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üèóÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Runtime:** Node.js LTS
- **Framework:** NestJS LTS
- **Language:** TypeScript (strict mode)
- **Database:** PostgreSQL
- **ORM:** TypeORM
- **Authentication:** JWT (access + refresh tokens)
- **Validation:** class-validator
- **Testing:** Jest
- **Real-time:** WebSocket (Socket.io)

## üìÅ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **Clean Architecture** —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏:

```
src/
‚îú‚îÄ‚îÄ modules/              # –ú–æ–¥—É–ª–∏ –¥–æ–º–µ–Ω–æ–≤ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ order/           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ product/         # –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ property/        # –°–∏—Å—Ç–µ–º–∞ —Å–≤–æ–π—Å—Ç–≤
‚îÇ   ‚îú‚îÄ‚îÄ pricing/         # –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ user/            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ configuration/   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—à–∞–±–ª–æ–Ω—ã)
‚îÇ   ‚îú‚îÄ‚îÄ production/      # –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ (–∑–∞–∫–∞–∑-–Ω–∞—Ä—è–¥—ã)
‚îÇ   ‚îú‚îÄ‚îÄ workforce/       # –¢—Ä—É–¥–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ accounting/      # –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ audit/           # –ê—É–¥–∏—Ç
‚îú‚îÄ‚îÄ common/              # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ decorators/      # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ guards/          # Guards
‚îÇ   ‚îú‚îÄ‚îÄ interceptors/    # Interceptors
‚îÇ   ‚îú‚îÄ‚îÄ filters/         # Exception filters
‚îÇ   ‚îî‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ core/                # –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ migrations/          # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
```

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø–æ —Å–ª–æ—è–º:
- **domain/** - –¥–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ (—Å—É—â–Ω–æ—Å—Ç–∏, value objects, —Å–µ—Ä–≤–∏—Å—ã)
- **application/** - use cases, –ø–æ—Ä—Ç—ã, DTO
- **infrastructure/** - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, ORM entities
- **presentation/** - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 18.x LTS
- PostgreSQL >= 14.x
- npm >= 8.x

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd erp-server

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install --legacy-peer-deps

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env (–æ—Å–æ–±–µ–Ω–Ω–æ DATABASE_*)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
createdb erp_production

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm run migration:run
```

### –ó–∞–ø—É—Å–∫

```bash
# Development mode (hot reload)
npm run start:dev

# Production mode
npm run build
npm run start:prod
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:3000/api`

## üìù –°–∫—Ä–∏–ø—Ç—ã

```bash
npm run build          # –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
npm run start          # –ó–∞–ø—É—Å–∫ –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
npm run start:dev      # –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ (hot reload)
npm run start:prod     # –ó–∞–ø—É—Å–∫ –≤ production
npm run lint           # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
npm run test           # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
npm run test:e2e       # E2E —Ç–µ—Å—Ç—ã
npm run test:cov       # –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

# –†–∞–±–æ—Ç–∞ —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
npm run migration:generate -- MigrationName  # –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
npm run migration:run                        # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm run migration:revert                     # –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
```

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:

```env
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
NODE_ENV=development
PORT=3000

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=erp_production
DATABASE_SYNCHRONIZE=false
DATABASE_LOGGING=true

# JWT
JWT_SECRET=your-secret-key
JWT_EXPIRATION=15m
REFRESH_TOKEN_SECRET=your-refresh-secret
REFRESH_TOKEN_EXPIRATION=7d

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=debug
```

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
- REST API: `http://localhost:3000/api`
- WebSocket: `ws://localhost:3000`

–û—Å–Ω–æ–≤–Ω—ã–µ endpoints:
- `/api/auth` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `/api/users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `/api/orders` - –ó–∞–∫–∞–∑—ã
- `/api/products` - –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞
- `/api/work-orders` - –ó–∞–∫–∞–∑-–Ω–∞—Ä—è–¥—ã
- `/api/payments` - –ü–ª–∞—Ç–µ–∂–∏
- `/api/accounting` - –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
npm run test

# E2E —Ç–µ—Å—Ç—ã
npm run test:e2e

# –ü–æ–∫—Ä—ã—Ç–∏–µ
npm run test:cov
```

## üèõÔ∏è –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Clean Architecture
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–Ω—É—Ç—Ä—å: presentation ‚Üí application ‚Üí domain
- –î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- –ò–∑–æ–ª—è—Ü–∏—è –º–æ–¥—É–ª–µ–π - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### Domain-Driven Design
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã (Bounded Contexts)
- –ê–≥—Ä–µ–≥–∞—Ç—ã –∏ –∫–æ—Ä–Ω–∏ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤
- Value Objects –¥–ª—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ –ª–æ–≥–∏–∫–∏
- –î–æ–º–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –º–µ–∂–º–æ–¥—É–ª—å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

### SOLID –ü—Ä–∏–Ω—Ü–∏–ø—ã
- Single Responsibility
- Open/Closed
- Liskov Substitution
- Interface Segregation
- Dependency Inversion

## üìã –§–∞–∑—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ 6 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–∑:

1. **–§–∞–∑–∞ 1: –§—É–Ω–¥–∞–º–µ–Ω—Ç** (–ù–µ–¥–µ–ª–∏ 1-4)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞, –ë–î, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

2. **–§–∞–∑–∞ 2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏** (–ù–µ–¥–µ–ª–∏ 5-8)
   - –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞, —Å–≤–æ–π—Å—Ç–≤–∞, —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –∑–∞–∫–∞–∑—ã

3. **–§–∞–∑–∞ 3: –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å** (–ù–µ–¥–µ–ª–∏ 9-12)
   - –ó–∞–∫–∞–∑-–Ω–∞—Ä—è–¥—ã, –∫–∞–Ω–±–∞–Ω, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã

4. **–§–∞–∑–∞ 4: –¢—Ä—É–¥–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã** (–ù–µ–¥–µ–ª–∏ 13-15)
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤, —Ä–∞—Å—á–µ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã

5. **–§–∞–∑–∞ 5: –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è** (–ù–µ–¥–µ–ª–∏ 16-18)
   - –ü–ª–∞—Ç–µ–∂–∏, –±–∞–ª–∞–Ω—Å—ã, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø–ª–∞—Ç

6. **–§–∞–∑–∞ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (–ù–µ–¥–µ–ª–∏ 19-20)
   - –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

UNLICENSED - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ–µ–∫—Ç

## üë• –ö–æ–º–∞–Ω–¥–∞

MassivYug Production Team

---

**–í–∞–∂–Ω–æ:** –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TypeScript strict mode –∏ —Å–ª–µ–¥—É–µ—Ç —Å—Ç—Ä–æ–≥–∏–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏.
